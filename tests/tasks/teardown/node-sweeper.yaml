---
apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: node-sweeper
  namespace: tekton-pipelines
  annotations:
    tekton.dev/pipelines.minVersion: "0.17.0"
    tekton.dev/categories: Kubernetes
    tekton.dev/tags: CLI, kubectl
    tekton.dev/displayName: "kubernetes actions"
    tekton.dev/platforms: "linux/amd64"
spec:
  description: |
    Clean up orphan nodes.
  steps:
  - name: teardown
    image: bitnami/kubectl
    script: |
      #!/bin/bash
      echo "Delete nodes from tests"
      kubectl delete nodes -l karpenter.sh/provisioner-name=default
