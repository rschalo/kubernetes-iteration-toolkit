# this runs the pipeline

# listed params populate params in ./template.yaml such as '$(params.name)'

apiVersion: tekton.dev/v1beta1
kind: PipelineRun
metadata:
  name: schalor-wiki-kitctl
  namespace: tekton-pipelines
spec:
  workspaces:
    - name: source
      emptyDir: {}
    - name: results
      emptyDir: {}
    - name: kubeconfig
      volumeClaimTemplate:
        spec:
          accessModes:
          - ReadWriteOnce
          storageClassName: kit-gp2
          resources:
            requests:
              storage: 1Gi
  pipelineRef:
    name: singlecluster-run
  params:
  - name: name
    value: "example"
  - name: kubernetes-version
    value: "1.25"
  - name: "node_count"
    value: "100"
  - name: "amp-workspace-id"
    value: ""
  - name: "results-bucket"
    value: ""
  podTemplate:
    nodeSelector:
      kubernetes.io/arch: amd64
  serviceAccountName: tekton-pipelines-executor
